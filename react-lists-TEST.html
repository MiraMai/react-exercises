<!DOCTYPE html> 
<html lang="en">
<head> 
  <title>Coffee-survey</title>
  <meta charset="utf-8" /> 
    
  <!--    bootstrap-->
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    
  <!--    JSX-->
  <script src="https://unpkg.com/react@latest/dist/react.js"></script>
  <script src="https://unpkg.com/react-dom@latest/dist/react-dom.js"></script>
  <script src="https://unpkg.com/babel-standalone@6.15.0/babel.min.js"></script>
    
    <style>
        #text {
            color:gray;
            font-size: 13pt;
            font-family: Verdana, Geneva, sans-serif;
        }
        
        body {
            font-size: 16pt;
            font-family: Arial, Helvetica, sans-serif;
/*            background-image: url('dog.jpg');*/

        }
        
    </style>
    
    
    
    <script type="text/babel">

        let coffee1 = {
            name: 'Mira',
            age: 34 ,
            coffees: 1
        }
        
        let coffee2 = {
            name: 'Beatriz',
            age: 34 ,
            coffees: 5
        }
        
        let coffee3 = {
            name: 'Eleni',
            age: 33 ,
            coffees: 2
        }
        const coffeeList = [coffee1, coffee2, coffee3];
//        let List = [dog1, dog2, dog3, dog4];
        
        class CoffeeList extends React.Component {
            render () {
                let newList = this.props.List.map(element => <MyListItem item={element} />);
                return (
                  <div>                                  
                    <div className="col-sm-4"></div>
                    <div className="col-sm-4">
                        <ul>{newList}</ul>
                    </div>
                    <div className="col-sm-4"></div>
                  </div>                                      

                );
            }
        }
        
        //gemensam component
        class App extends React.Component {
            constructor(props) {
                super(props); 
                this.state = {
                    List: coffeeList//[coffee1, coffee2, coffee3]
                };
            this.addNewObject= this.addNewObject.bind(this);    
            }
            render () {
                return (
                  <div>    
                    <CoffeeList List={this.state.List} />
                    <AddForm addNewObject={this.addNewObject} />
                  </div>        
                );
            }
            addNewObject (newObject) {
                const newList = this.state.List.slice();
                newList.push(newObject);
                this.setState ({
                    List: newList//[coffee1, coffee2, coffee3, newObject]
                });
                console.log(newObject);

            }
        }
        
        // komponent som visar listan
        class MyListItem extends React.Component {
            constructor(props) {
                super(props);
                this.handleChange = this.handleChange.bind(this);
            }
            render () {
                return (
                    <li>
                        <span id="text">Name: </span> 
                        <span>{this.props.item.name} </span>
                        <br />
                        <span id="text">Age: </span>
                        <span>{this.props.item.age}</span>
                        <br />
                        <span id="text">Cups of coffee: </span> 
                        <span>{this.props.item.coffees}</span>  
                    </li>
                    );
                } 
            handleChange (event) {
                this.props.addNewObject(event.target.value);
            }
            
        }        
            
       
        class AddForm extends React.Component {
            constructor(props) {
                super(props);
                this.state = {
                    addName: "",
                    addAge: "",
                    addCoffee: ""
                }
            this.nameInputValue = this.nameInputValue.bind(this);
            this.ageInputValue = this.ageInputValue.bind(this); 
            this.coffeeInputValue = this.coffeeInputValue.bind(this);  
            this.clickOnButton = this.clickOnButton.bind(this);    
            }
            render () {
                
                return (
                  <form>    
                    <input 
                        type="text"
                        className="form-control"
                        placeholder="name"
                        onChange={this.nameInputValue}
                        />
                    <br />    
                    <input 
                        type="text"
                        className="form-control"
                        placeholder="age"
                        onChange={this.ageInputValue}
                        />
                    <br />    
                    <input 
                        type="text"
                        className="form-control"
                        placeholder="cups of coffee"
                        onChange={this.coffeeInputValue}
                        />
                    <br />    
                    <button 
                        onClick={this.clickOnButton}
                        className="btn">
                        Add</button>
                   </form>    
                );
            }
            // function som ska köras när man klickar på add 
            
            // functioner som tar värderna från inputs och sparar dem i variablar
            nameInputValue (event) {
                   this.setState ({ addName: event.target.value });
                   /*let newObject= {
                       name: event.target.value,
                       age: this.state.addAge ,
                       coffees: this.state.addCoffee
                   }; 
                   this.props.addNewObject(newObject); */
            }
            ageInputValue (event) {
                   this.setState ({ addAge: event.target.value });
                  /* let newObject= {
                       name: this.state.addName,
                       age: event.target.value,
                       coffees: this.state.addCoffee
                   }; 
                   this.props.addNewObject(newObject);*/
            }
            coffeeInputValue (event) {
                   this.setState ({ addCoffee: event.target.value });
                   /*let newObject= {
                       name: this.state.addName,
                       age: this.state.addAge,
                       coffees: event.target.value
                   }; 
                   this.props.addNewObject(newObject);*/
            }
            clickOnButton (event) {
                let newObject= {
                   name: this.state.addName,
                   age: this.state.addAge ,
                   coffees: this.state.addCoffee
               }; 
               this.props.addNewObject(newObject);
            }

        }
        
        ReactDOM.render (
            <App />,
            document.getElementById('myCoffeeList')
        );
    </script>   
    
    
    
    
</head>
    
<body>
    <div class="container-fluid"> 
        <h1>Coffee-survey</h1>
        <h3>How many coffees did you drink today?</h3>
        <div class="row" id="myCoffeeList"></div>
        <div class="row" id="inputs"></div>
    </div>    
    
    
    
</body>    
</html>    
    